const line=()=>{const t=24,e=24,a=24,s=48;let n=0,c=0;const i=d3.select(".line-artist"),r=i.select("svg"),o={};let l;const d=d3.timeParse("%Y-%m-%d"),m=l=>{const d=i.node().offsetWidth;n=d-s-e,c=600-t-a,r.attr("width",d).attr("height",600);const m=`translate(${s},${t})`,x=r.select(".line-artist-container");x.attr("transform",m);const g=d3.line().x(t=>o.count.x(t.dia)).y(t=>o.count.y(t.visitas));((t,e)=>{o.count.x.range([0,t]),o.count.y.range([e,0])})(n,c);const h=i.select(".line-artist-container-dos"),p=h.selectAll(".line").data([l]),u=p.enter().append("path").attr("class","line").attr("stroke-width","1.5"),f=h.selectAll(".circles").data(l),y=f.enter().append("circle").attr("class","circles");p.merge(u).attr("d",g),f.merge(y).attr("cx",t=>o.count.x(t.dia)).attr("cy",t=>o.count.y(t.visitas)).attr("r",t=>"2019-05-14"===t.fecha?5:0),(t=>{const e=d3.axisBottom(o.count.x).tickFormat(d3.timeFormat("%m-%d")).ticks(13);t.select(".axis-x").attr("transform",`translate(0,${c})`).call(e);const a=d3.axisLeft(o.count.y).tickFormat(d3.format("d")).ticks(5).tickSizeInner(-n);t.select(".axis-y").call(a)})(x)};window.addEventListener("resize",()=>{m(l)}),d3.json("csv/test.json",(t,e)=>{t?console.log(t):((l=e).forEach(t=>{t.nombre=t.artista,t.visitas=+t.visitas,t.dia=d(t.fecha)}),console.log(l),(()=>{const t=r.select(".line-artist-container");t.append("g").attr("class","axis axis-x"),t.append("g").attr("class","axis axis-y"),t.append("g").attr("class","line-artist-container-dos")})(),(()=>{const t=d3.scaleTime().domain(d3.extent(l,t=>t.dia)),e=d3.scaleLinear().domain([0,d3.max(l,t=>1.25*t.visitas)]);o.count={x:t,y:e}})(),m(l))})};line(),new SlimSelect({select:"#select-artist",searchPlaceholder:"Selecciona una artista..."});